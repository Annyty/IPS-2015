CREATE TABLE ARTICULOS ( 
	id_articulo INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	nombre VARCHAR(100) NOT NULL,
	descripcion VARCHAR(1000),
	precio DECIMAL(10,2) NOT NULL
)
;

CREATE TABLE COMPRAS ( 
	id_compra INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	id_cliente INTEGER NOT NULL,
	fecha DATE NOT NULL,
	subtotal DECIMAL(10,2)
)
;

CREATE TABLE COMPRAS_DETALLES ( 
	id_compra INTEGER NOT NULL,
	id_articulo INTEGER NOT NULL,
	precio_unitario DECIMAL(10,2) NOT NULL,
	cantidad INTEGER NOT NULL,
	precio DECIMAL(10,2) NOT NULL
)
;

CREATE TABLE CLIENTES( 
	id_cliente INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	nombre VARCHAR(100) NOT NULL,
	login VARCHAR(100) NOT NULL,
	email VARCHAR(200) NOT NULL,
	fecha_registro DATE NOT NULL
)
;


ALTER TABLE ARTICULOS ADD CONSTRAINT PK_ARTICULOS 
	PRIMARY KEY (id_articulo)
;


ALTER TABLE COMPRAS ADD CONSTRAINT PK_COMPRAS 
	PRIMARY KEY (id_compra)
;


ALTER TABLE COMPRAS_DETALLES ADD CONSTRAINT PK_compras_detalles 
	PRIMARY KEY (id_compra, id_articulo)
;


ALTER TABLE CLIENTES ADD CONSTRAINT PK_CLIENTES 
	PRIMARY KEY (id_cliente)
;




ALTER TABLE COMPRAS ADD CONSTRAINT FK_COMPRAS_CLIENTES
	FOREIGN KEY (id_cliente) REFERENCES CLIENTES (id_cliente)
;

ALTER TABLE COMPRAS_DETALLES ADD CONSTRAINT FK_compras_detalles_ARTICULOS 
	FOREIGN KEY (id_articulo) REFERENCES ARTICULOS (id_articulo)
;

ALTER TABLE COMPRAS_DETALLES ADD CONSTRAINT FK_compras_detalles_COMPRAS 
	FOREIGN KEY (id_compra) REFERENCES COMPRAS (id_compra)
;







